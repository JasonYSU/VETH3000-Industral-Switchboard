/**
****************************************************************************************
@File    : D:\ProgramFiles\KEIL\hal\incl\veth_mac.h
@Author  : Duke Lee
@Date    : 18-Oct-2014
@Version : V1.0.00
@Breif   : CGI½Ó¿Ú£ºMAC±íÏîµÄÍ·ÎÄ¼ş MACè¡¨é¡¹çš„å¤´æ–‡ä»¶
****************************************************************************************
**/

#ifndef _VETH_MAC_H__
#define _VETH_MAC_H__ 

#include <stdint.h>
#include "veth_common.h"

#define ENTRY_STATIC    0
#define ENTRY_DYNAMIC   1

typedef struct mac_api_t {
	uint8_t  add_or_delet;      /* '0' ä¸ºåˆ é™¤ ,'1'  ä¸ºæ·»åŠ  */ //          
	uint8_t  new_mac[6];        /* å­˜æ”¾æ–°æ·»åŠ åˆ é™¤æˆ–è€…è¯»å–åˆ°çš„entryçš„MACåœ°å€*/ 
	uint16_t port_vector;       /* å­˜æ”¾æ·»åŠ æˆ–è€…è¯»å–åˆ°çš„ç«¯å£å‘é‡*/ 
	uint8_t  sta_or_dym;        /* å­˜æ”¾é™æ€åŠ¨æ€æ ‡å¿—*/  //ENTRY_STATIC for static entrys ENTRY_DYNAMIC for dynamic entrys   //Ö»ÔÚ×´Ì¬À¸ÀïÃæÓÃµ½
	uint8_t  vlan_id;           /* å­˜æ”¾vlanid*/
}MAC_API_T;


/***********************************************************************/
//å‡½æ•°å   :  Set_Aging_time(uint16_t age_time)
//åŠŸèƒ½     :  è®¾ç½®è€åŒ–æ—¶é—´
//å‚æ•°     :  Age_time(Input)__è€åŒ–æ—¶é—´å–å€¼èŒƒå›´åº”è¯¥ä¸º15çš„å€æ•°ï¼ˆ0~3825ï¼‰ï¼Œå¦åˆ™è®¾ç½®çš„è€åŒ–æ—¶é—´å¯èƒ½è·Ÿæ‰€è¾“å…¥çš„æ—¶é—´æœ‰å‡ºå…¥
//                          PSï¼šå°†è€åŒ–æ—¶é—´è®¾ç½®ä¸º0è¡¨ç¤ºç¦æ­¢è€åŒ–
//è¿”å›å€¼   ï¼š None
/***********************************************************************/
void Set_Age_time(uint16_t age_time);

/***********************************************************************/
//å‡½æ•°å     :  Get_Aging_time()
//åŠŸèƒ½       :  è·å–MACè¡¨æ ¼çš„å½“å‰è®¾ç½®æ—¶é—´
//å‚æ•°       ï¼š None
//è¿”å›å€¼     ï¼š uint16_t è·å–çš„MACentryè€åŒ–æ—¶é—´
/***********************************************************************/
uint16_t Get_Age_time(void);

/***********************************************************************/
//å‡½æ•°å  ï¼š  Add_or_Delet_MACentry(MAC_API_T *entry)
//åŠŸèƒ½    ï¼š  æ·»åŠ æˆ–è€…åˆ é™¤ä¸€æ¡é™æ€MACåœ°å€é¡¹
//å‚æ•°    ï¼š  entryï¼ŒæŒ‡å‘ä¸€ä¸ªMAC_API_T ,ç”¨æ¥ä¼ é€’éœ€è¦æ·»åŠ æˆ–è€…åˆ é™¤çš„MAC entry 
//è¿”å›å€¼  ï¼š  uint8_t '1' æ·»åŠ æˆ–è€…åˆ é™¤æˆåŠŸ,'0' æ·»åŠ /åˆ é™¤å¤±è´¥ 
/***********************************************************************/
uint8_t Add_or_Delet_MACentry(MAC_API_T *entry);

/***********************************************************************/
//å‡½æ•°å    ï¼š Display_All_MACentry(MAC_API_T *entry,MAC_ENTRY_T *mac_entry)
//åŠŸèƒ½      ï¼š æŸ¥æ‰¾æ‰€MACè¡¨ä¸­çš„MAC entry ä½¿ç”¨å‰éœ€å¡«å…¥MAC_ENTRY_T ä¸­çš„åˆå§‹MACå€¼        
//å‚æ•°      ï¼š MAC_API_T *entryç”¨æ¥å­˜æ”¾è¯»å–åˆ°çš„MAC_entryä¿¡æ¯,æ‰€éœ€ä¿¡æ¯è§MAC_ENTRY_T ç»“æ„ä½“å®šä¹‰
//             MAC_ENTRY_T *mac_entryç”¨æ¥å­˜æ”¾æ¯æ¬¡è®¿é—®MACè¡¨çš„åˆå§‹MACåœ°å€ï¼Œä¹Ÿå°±æ˜¯ï¼š
//	  for(loop = 0 ;loop < 6; loop++ )
//	   {
//	      mac_entry->mac_entry_MAC[loop] = 0xff;  //MAC{0xff,0xff,0xff,0xff,0xff,0xff} used to get the first ATU entry
//		 }	
/***********************************************************************/	 
uint8_t Display_ALL_MACentry(MAC_API_T *entry,MAC_ENTRY_T *mac_entry,uint16_t vlan_id);

/***********************************************************************/
//å‡½æ•°å    : Flush_MAC_entry()
//åŠŸèƒ½      ï¼šæ¸…é™¤æ‰MACè¡¨ä¸­çš„æ‰€æœ‰éé™æ€çš„MAC entrys
//å‚æ•°      ï¼šNone
//è¿”å›å€¼    ï¼šNone
/***********************************************************************/
void Flush_MAC_entry(void);

/***********************************************************************/
//å‡½æ•°å        : Set_MAC_forbid(uint16_t port_vector)
//åŠŸèƒ½          ï¼šè®¾ç½®ç«¯å£MACå­¦ä¹ ç¦æ­¢æ¨¡å¼
//å‚æ•°          ï¼šport_vector : ç«¯å£å‘é‡(0~9)
//è¿”å›å€¼        ï¼šNone
/***********************************************************************/	
void Set_MAC_forbid(uint16_t port_vector);

/***********************************************************************/
//å‡½æ•°å        : Get_MAC_forbid()
//åŠŸèƒ½          ï¼šè·å–ç«¯å£MACå­¦ä¹ ç¦æ­¢æ¨¡å¼çš„ç«¯å£å‘é‡
//å‚æ•°          ï¼šNone
//è¿”å›å€¼        ï¼šç¦æ­¢æ¨¡å¼çš„ç«¯å£å‘é‡
/***********************************************************************/	
uint16_t Get_MAC_forbid(void);

/***********************************************************************/	
//å‡½æ•°å      	:	Dispaly_sta_MAC_entry(MAC_API_T *entry,MAC_ENTRY_T *mac_entry)
//åŠŸèƒ½          : è·å–é™æ€ ATU(:MAC entry table)é¡¹
//å‚æ•°          : MAC_API_T  : å­˜æ”¾è·å¾—çš„MAC entryç›¸å…³ä¿¡æ¯
//                MAC_ENTRY_T: å­˜æ”¾å½“å‰å­˜æ”¾çš„MACå€¼ï¼Œåˆæ¬¡è°ƒç”¨éœ€å¯¹ MAC_ENTRY_T.mac_entry_MACå¡«å…¥åˆå€¼{0xff,0xff,0xff,0xff,0xff,0xff}
//                vlan_id    : MAC entry å¯¹åº”çš„vlan id
//è¿”å›å€¼        : '0' è¡¨ç¤ºåˆ°è¾¾äº†ATU(:MAC entry table)ç»“å°¾ ,â€˜1â€™è¡¨ç¤ºè¿˜å¯èƒ½æœ‰æœªè¯»å–åˆ°çš„é™æ€MAC entry 
/***********************************************************************/
uint8_t Display_sta_MAC_entry(MAC_API_T *entry,MAC_ENTRY_T *mac_entry,uint16_t vlan_id);

/***********************************************************************/
//å‡½æ•°å   : MAC_demo()
//åŠŸèƒ½     ï¼šæµ‹è¯•æ‰€æœ‰ç¼–å†™çš„MACè¡¨é¡¹æ¥å£å‡½æ•°
//å‚æ•°     ï¼šNone
//è¿”å›å€¼   ï¼šNone
/***********************************************************************/
void MAC_demo(void);

#endif

